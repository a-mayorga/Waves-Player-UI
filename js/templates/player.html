
<!--
<div class="player">
  <div class="caratula">
    <div class="caratula-img">
      <img id="art" src="media/0111.jpg" alt="">
    </div>
    <div class="caratula-info">
      <ul>
        <li><a href=""><p id="add">+</p></a></li>
        <li><a href=""><p id="artist">Artista</p></a></li>
        <li><a href=""><p id="title">Cancion</p></a></li>
      </ul>
    </div>
  </div>
  <div class="reproductor">
    <div class="reproductor-controles">
      <a href=""><img id="prev" src="media/back.svg" alt=""></a>
      <a href=""><img id="play" src="media/play-button.svg" alt=""></a>
      <a href=""><img id="next" src="media/next.svg" alt=""></a>
    </div>
    <div class="reproductor-timer">
        <div class="time">
          <span id="current">0:00</span>
        </div>
        <div class="timer">
          <div id="track">
              <div id="progress"></div>
              <div id="handler"></div>
          </div>
        </div>
        <div class="time">
          <span id="duration">0:00</span>
        </div>
    </div>
  </div>
  <div class="opciones">
  </div>
</div>
-->
<div class="sideBar">
    <div class="userInfo">
        <h1 id="userName">Nombre</h1>
        <p id="userNickname">@Hola</p>
    </div>

    <div id="sideBarMenu">
        <h1 class="menuCategory">Waves</h1>
        <ul>
            <li><img src="media/artists.svg">Artistas</li>
            <li><img src="media/albums.svg">Álbums</li>
            <li><img src="media/songs.svg">Canciones</li>
            <li><img src="media/genres.svg">Géneros</li>
        </ul>
        <h1 class="menuCategory">Biblioteca</h1>
        <ul>
            <li><img src="media/artists.svg">Artistas</li>
            <li><img src="media/albums.svg">Álbums</li>
            <li><img src="media/songs.svg">Canciones</li>
            <li><img src="media/genres.svg">Géneros</li>
        </ul>
    </div>
    
    <div id="player">
        <img id="art" src="media/0111.jpg" alt="">
        <div id="track">
              <div id="progress"></div>
              <div id="handler"></div>
          </div>
<!--        <div id="add">+</div>-->
        <ul>
        <li id="title">Cancion</li>
        <li id="artist">Artista</li>
      </ul>
      <div class="reproductor-controles">
          <img id="prev" src="media/back.svg">
          <img id="play" src="media/play-button.svg">
          <img id="next" src="media/next.svg">
    </div>
    </div>

</div>











<script type="text/javascript">
var holding = false;
var track = document.getElementById('track');
var progress = document.getElementById('progress');
var play = document.getElementById('play');
var next = document.getElementById('next');
var prev = document.getElementById('prev');
var title = document.getElementById('title');
var artist = document.getElementById('artist');
var art = document.getElementById('art');
var dur = document.getElementById('duration');
var current = document.getElementById('current');
var current_track = 0;
var song, audio, duration;
var playing = false;

var songs = [{
  title: 'Don’t Wanna Know',
  artist: 'Maroon 5',
  url: 'http://localhost/waves/media/songs/0000222.mp3',
  art: 'media/0111.jpg'
}];


window.addEventListener('load', init(), false);
function init() {
  song = songs[current_track];
  audio = new Audio();
  audio.src = song.url;
  title.textContent = song.title;
  artist.textContent = song.artist;
  art.src = song.art;
}

audio.addEventListener('timeupdate', updateTrack, false);
audio.addEventListener('loadedmetadata', function () {
  duration = this.duration;
  dur.textContent = timeSec(duration.toFixed(0));
}, false);

window.onmousemove = function (e) {
  e.preventDefault();
  if (holding) seekTrack(e);
}
window.onmouseup = function (e) {
  holding = false;
  console.log(holding);
}
track.onmousedown = function (e) {
  holding = true;
  seekTrack(e);
  console.log(holding);
}

play.onclick = function () {
  playing ? audio.pause() : audio.play();
}

audio.addEventListener("pause", function () {
  play.src ='media/play-button.svg';
  playing = false;
}, false);
audio.addEventListener("playing", function () {
  play.src = 'media/pause.svg';
  playing = true;
}, false);

next.addEventListener("click", nextTrack, false);
prev.addEventListener("click", prevTrack, false);
function updateTrack() {
  curtime = audio.currentTime;
  percent = Math.round((curtime * 100) / duration);
  progress.style.width = percent + '%';
  handler.style.left = percent + '%';
  current.textContent = timeSec(curtime.toFixed(0));
}
function seekTrack(e) {
  event = e || window.event;
  var x = e.pageX - player.offsetLeft - track.offsetLeft;
  percent = Math.round((x * 100) / track.offsetWidth);
  if (percent > 100) percent = 100;
  if (percent < 0) percent = 0;
  progress.style.width = percent + '%';
  handler.style.left = percent + '%';
  audio.play();
  audio.currentTime = (percent * duration) / 100
}

function nextTrack() {
  current_track++;
  current_track = current_track % (songs.length);
  song = songs[current_track];
  audio.src = song.url;
  audio.onloadeddata = function() {
    updateInfo();
  }
}

function prevTrack() {
  current_track--;
  current_track = (current_track == -1 ? (songs.length - 1) : current_track);
  song = songs[current_track];
  audio.src = song.url;
  audio.onloadeddata = function() {
    updateInfo();
  }
}
function updateInfo() {
  title.textContent = song.title;
  artist.textContent = song.artist;
  art.src = song.art;
  art.onload = function() {
      audio.play();
  }
}

function timeSec(time){
  var minutes = Math.floor( time / 60 );
  var seconds = time % 60;
  minutes = minutes < 10 ? '0' + minutes : minutes;
  seconds = seconds < 10 ? '0' + seconds : seconds;
  var result = minutes + ":" + seconds;
  return result;
}
</script>
